<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My Collection — Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>My Video Gallery</h1>
      <div class="subtitle">Hover (or focus / tap) to preview • Click to open the page</div>
    </header>

    <main class="grid" id="videoGrid">
      <!-- CARD TEMPLATE (duplicate & edit src/poster/href/label) -->
      <a class="card" href="video1.html" aria-label="Open Video 1 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid1.jpg">
          <source src="assets/videos/vid1.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 1</span>
        <span class="hint" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview
        </span>
      </a>

      <a class="card" href="video2.html" aria-label="Open Video 2 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid2.jpg">
          <source src="assets/videos/vid2.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 2</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video3.html" aria-label="Open Video 3 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid3.jpg">
          <source src="assets/videos/vid3.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 3</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video4.html" aria-label="Open Video 4 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid4.jpg">
          <source src="assets/videos/vid4.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 4</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video5.html" aria-label="Open Video 5 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid5.jpg">
          <source src="assets/videos/vid5.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 5</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video6.html" aria-label="Open Video 6 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid6.jpg">
          <source src="assets/videos/vid6.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 6</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video7.html" aria-label="Open Video 7 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid7.jpg">
          <source src="assets/videos/vid7.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 7</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video8.html" aria-label="Open Video 8 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid8.jpg">
          <source src="assets/videos/vid8.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 8</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video9.html" aria-label="Open Video 9 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid9.jpg">
          <source src="assets/videos/vid9.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 9</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>

      <a class="card" href="video10.html" aria-label="Open Video 10 page">
        <video preload="none" muted playsinline loop poster="assets/posters/vid10.jpg">
          <source src="assets/videos/vid10.mp4" type="video/mp4" />
        </video>
        <span class="label">Video 10</span><span class="hint" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> Preview</span>
      </a>
    </main>

    <footer>© <span id="year"></span> Your Name</footer>
  </div>

  <script>
    // Helpers
    const prefersReduced = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches;

    // Lazy-enable video src on first interaction to save bandwidth
    function enableVideo(video){
      // Already loaded
      if (video.dataset.enabled) return;
      // If there were <source> children, browser will handle; preload stays "none"
      video.load?.();
      video.dataset.enabled = "1";
    }

    function startPreview(card){
      const video = card.querySelector('video');
      if (!video) return;
      enableVideo(video);
      if (prefersReduced) return; // respect reduce-motion
      // Ensure muted/inline to allow autoplay
      video.muted = true; video.playsInline = true;
      video.play().then(()=>{
        card.classList.add('playing');
      }).catch(()=>{ /* autoplay blocked? ignore */ });
    }

    function stopPreview(card){
      const video = card.querySelector('video');
      if (!video) return;
      video.pause();
      // Rewind a little so next hover feels snappy
      try { if (video.currentTime > 0.2) video.currentTime = 0.1; } catch {}
      card.classList.remove('playing');
    }

    // Bind all cards
    const cards = Array.from(document.querySelectorAll('.card'));

    cards.forEach(card => {
      // Mouse
      card.addEventListener('mouseenter', () => startPreview(card));
      card.addEventListener('mouseleave', () => stopPreview(card));

      // Keyboard focus preview
      card.addEventListener('focus', () => startPreview(card));
      card.addEventListener('blur',  () => stopPreview(card));

      // Touch: tap once to preview, tap again (or tap & hold briefly) still follows link
      let tappedOnce = false;
      card.addEventListener('touchstart', (e) => {
        if (!tappedOnce){
          e.preventDefault(); // stay on card to preview
          tappedOnce = true;
          startPreview(card);
          setTimeout(()=>{ tappedOnce = false; }, 700); // short window for second tap to click
        }
      }, {passive:false});
    });

    // IntersectionObserver: prime videos when scrolled into view (keeps preload=none)
    const io = 'IntersectionObserver' in window ? new IntersectionObserver(entries => {
      for (const entry of entries){
        if (entry.isIntersecting){
          const v = entry.target.querySelector('video');
          if (v && !v.dataset.enabled){
            // Don't actually load sources yet; just set up metadata quickly when visible
            try { v.load(); v.dataset.enabled = "1"; } catch {}
          }
          io.unobserve(entry.target);
        }
      }
    }, { rootMargin: '200px 0px' }) : null;

    if (io){ cards.forEach(c => io.observe(c)); }

    // Current year in footer
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>


